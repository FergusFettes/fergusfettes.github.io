<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Fergus Fettes">

<title>Fergus Fettes - GIS Map Experiments</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<style>
    .quarto-title-block .quarto-title-banner {
      color: white;
background: pink;
    }
    </style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Fergus Fettes</span>
    </a>
  </div>
          <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-reviews" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Reviews</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-reviews">    
        <li class="dropdown-header">Cities</li>
        <li>
    <a class="dropdown-item" href="../../Reviews/Cities.html">
 <span class="dropdown-text">City Reviews</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-toggle-container">
                <a href="" class="quarto-reader-toggle nav-link" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
            </div>
            <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">GIS Map Experiments</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Fergus Fettes </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">Oct 30, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#attempt-2-to-make-running-routes-from-text" id="toc-attempt-2-to-make-running-routes-from-text" class="nav-link" data-scroll-target="#attempt-2-to-make-running-routes-from-text">Attempt 2 to make running routes from text</a>
  <ul class="collapse">
  <li><a href="#convert-text-to-gps-coords" id="toc-convert-text-to-gps-coords" class="nav-link" data-scroll-target="#convert-text-to-gps-coords">Convert Text to GPS Coords</a></li>
  <li><a href="#snap-to-roads" id="toc-snap-to-roads" class="nav-link" data-scroll-target="#snap-to-roads">Snap to Roads</a></li>
  <li><a href="#snap-to-roads-attempt-2" id="toc-snap-to-roads-attempt-2" class="nav-link" data-scroll-target="#snap-to-roads-attempt-2">Snap to Roads (Attempt 2)</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Cartography is an ancient and noble art. It has continued apace into the modern era. It seems clear that it will be a useful tool in my kit, both regarding my career as well as my hobbies, and there are many fun everyday applications of it, so I am finally diving in to studying it in a little more detail.</p>
<p><a href="../../Projects/GIS.html">Main</a></p>
</section>
<section id="attempt-2-to-make-running-routes-from-text" class="level1">
<h1>Attempt 2 to make running routes from text</h1>
<section id="convert-text-to-gps-coords" class="level2">
<h2 class="anchored" data-anchor-id="convert-text-to-gps-coords">Convert Text to GPS Coords</h2>
<div class="cell" data-execution_count="1">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the text to a path</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> svgpathtools</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>paths <span class="op">=</span> svgpathtools.svg2paths(<span class="st">'/h/Pictures/test2.svg'</span>)[<span class="dv">0</span>]</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the path to a list of points</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> path_to_points(path, n<span class="op">=</span><span class="dv">100</span>):</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    points <span class="op">=</span> []</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> path:</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">isinstance</span>(line, svgpathtools.Line):</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>            x <span class="op">=</span> np.linspace(line.start.real, line.end.real, <span class="dv">10</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>            y <span class="op">=</span> np.linspace(line.start.imag, line.end.imag, <span class="dv">10</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>            points.extend(<span class="bu">list</span>(<span class="bu">zip</span>(x, y)))</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> <span class="bu">isinstance</span>(line, svgpathtools.CubicBezier):</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>            x <span class="op">=</span> np.linspace(line.start.real, line.end.real, <span class="dv">10</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>            y <span class="op">=</span> np.linspace(line.start.imag, line.end.imag, <span class="dv">10</span>)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>            points.extend(<span class="bu">list</span>(<span class="bu">zip</span>(x, y)))</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">'Unknown line type: </span><span class="sc">{}</span><span class="st">'</span>.<span class="bu">format</span>(line))</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> points</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>points <span class="op">=</span> []</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> path <span class="kw">in</span> paths:</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    points.append(path_to_points(path))</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Flip the y axis</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>points <span class="op">=</span> [[(x, <span class="op">-</span>y) <span class="cf">for</span> x, y <span class="kw">in</span> path] <span class="cf">for</span> path <span class="kw">in</span> points]</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the points</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">6</span>))</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> path <span class="kw">in</span> points:</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    x, y <span class="op">=</span> <span class="bu">zip</span>(<span class="op">*</span>path)</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>    plt.plot(x, y)</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="GIS_1_files/figure-html/cell-2-output-1.png" width="503" height="485"></p>
</div>
</div>
<p>So, now Iâ€™m just going to draw a simple image in Inkscape, and then convert it to a list of points. I can later figure out how to generate my svg properly (the trick to converting an SVG with text to an set of lines is not jumping out at me).</p>
<div class="cell" data-execution_count="2">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Center the x and y coordinates on Prague, and stretch them to the correct size</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>prague <span class="op">=</span> (<span class="fl">14.4378</span>, <span class="fl">50.0755</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Width is 500m</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>target_width <span class="op">=</span> <span class="dv">2000</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the ratio of the width and height of the points</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>width <span class="op">=</span> <span class="bu">max</span>(x <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> x, y <span class="kw">in</span> path) <span class="op">-</span> <span class="bu">min</span>(x <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> x, y <span class="kw">in</span> path)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>height <span class="op">=</span> <span class="bu">max</span>(y <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> x, y <span class="kw">in</span> path) <span class="op">-</span> <span class="bu">min</span>(y <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> x, y <span class="kw">in</span> path)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>ratio <span class="op">=</span> width <span class="op">/</span> height</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Meters to degrees</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>meters_to_degrees <span class="op">=</span> <span class="dv">1</span> <span class="op">/</span> <span class="dv">111111</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Degree range</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>degree_width <span class="op">=</span> target_width <span class="op">*</span> meters_to_degrees</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Height is proportional to the width</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>degree_height <span class="op">=</span> degree_width <span class="op">/</span> ratio</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Center the points</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>center_x <span class="op">=</span> (<span class="bu">max</span>(x <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> x, y <span class="kw">in</span> path) <span class="op">+</span> <span class="bu">min</span>(x <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> x, y <span class="kw">in</span> path)) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>center_y <span class="op">=</span> (<span class="bu">max</span>(y <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> x, y <span class="kw">in</span> path) <span class="op">+</span> <span class="bu">min</span>(y <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> x, y <span class="kw">in</span> path)) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>points <span class="op">=</span> [[(x <span class="op">-</span> center_x, y <span class="op">-</span> center_y) <span class="cf">for</span> x, y <span class="kw">in</span> path] <span class="cf">for</span> path <span class="kw">in</span> points]</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Scale the points</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>points <span class="op">=</span> [[(x <span class="op">*</span> degree_width <span class="op">/</span> width, y <span class="op">*</span> degree_height <span class="op">/</span> height) <span class="cf">for</span> x, y <span class="kw">in</span> path] <span class="cf">for</span> path <span class="kw">in</span> points]</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Move the points to Prague</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>points <span class="op">=</span> [[(x <span class="op">+</span> prague[<span class="dv">0</span>], y <span class="op">+</span> prague[<span class="dv">1</span>]) <span class="cf">for</span> x, y <span class="kw">in</span> path] <span class="cf">for</span> path <span class="kw">in</span> points]</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the points to a list of geometry objects</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shapely.geometry</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>points <span class="op">=</span> [[shapely.geometry.Point(x, y) <span class="cf">for</span> x, y <span class="kw">in</span> path] <span class="cf">for</span> path <span class="kw">in</span> points]</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list of path objects</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>geom_paths <span class="op">=</span> [shapely.geometry.LineString(path) <span class="cf">for</span> path <span class="kw">in</span> points]</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the GeoJSON</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> folium</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> folium.Map(location<span class="op">=</span>[prague[<span class="dv">1</span>], prague[<span class="dv">0</span>]], zoom_start<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> path <span class="kw">in</span> points:</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>    folium.PolyLine([(p.y, p.x) <span class="cf">for</span> p <span class="kw">in</span> path]).add_to(m)</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="2">
<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -&gt; Trust Notebook</span><iframe srcdoc="<!DOCTYPE html>
<head>    
    <meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js&quot;></script>
    <script src=&quot;https://code.jquery.com/jquery-1.12.4.min.js&quot;></script>
    <script src=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js&quot;></script>
    <script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;></script>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/>
    
            <meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; />
            <style>
                #map_51c6c0b7fa59148ead2403dbd56e3883 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
            </style>
        
</head>
<body>    
    
            <div class=&quot;folium-map&quot; id=&quot;map_51c6c0b7fa59148ead2403dbd56e3883&quot; ></div>
        
</body>
<script>    
    
            var map_51c6c0b7fa59148ead2403dbd56e3883 = L.map(
                &quot;map_51c6c0b7fa59148ead2403dbd56e3883&quot;,
                {
                    center: [50.0755, 14.4378],
                    crs: L.CRS.EPSG3857,
                    zoom: 15,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );

            

        
    
            var tile_layer_89dd9a88dbdf550921b69d9ba0b4c6d5 = L.tileLayer(
                &quot;https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,
                {&quot;attribution&quot;: &quot;Data by \u0026copy; \u003ca href=\&quot;http://openstreetmap.org\&quot;\u003eOpenStreetMap\u003c/a\u003e, under \u003ca href=\&quot;http://www.openstreetmap.org/copyright\&quot;\u003eODbL\u003c/a\u003e.&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 18, &quot;maxZoom&quot;: 18, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            ).addTo(map_51c6c0b7fa59148ead2403dbd56e3883);
        
    
            var poly_line_5ee1fe7e965f5d44cb0a636e18122d76 = L.polyline(
                [[50.078482606266995, 14.430317493160404], [50.078178174917824, 14.430276820958563], [50.07787374356865, 14.430236148756721], [50.07756931221949, 14.43019547655488], [50.07726488087032, 14.43015480435304], [50.076960449521145, 14.430114132151198], [50.076656018171974, 14.430073459949357], [50.0763515868228, 14.430032787747516], [50.07604715547364, 14.429992115545675], [50.07574272412447, 14.429951443343834], [50.07574272412447, 14.429951443343834], [50.07555361346593, 14.429951443343834], [50.07536450280739, 14.429951443343834], [50.07517539214886, 14.429951443343834], [50.07498628149032, 14.429951443343834], [50.07479717083178, 14.429951443343834], [50.07460806017325, 14.429951443343834], [50.07441894951471, 14.429951443343834], [50.07422983885617, 14.429951443343834], [50.07404072819763, 14.429951443343834], [50.07404072819763, 14.429951443343834], [50.07383980987513, 14.430043596020717], [50.073638891552626, 14.4301357486976], [50.07343797323012, 14.430227901374485], [50.07323705490762, 14.430320054051368], [50.07303613658512, 14.430412206728251], [50.07283521826261, 14.430504359405134], [50.072634299940106, 14.430596512082019], [50.07243338161761, 14.430688664758902], [50.0722324632951, 14.430780817435785], [50.0722324632951, 14.430780817435785], [50.07217342334628, 14.430839857222788], [50.072114383397455, 14.430898897009792], [50.07205534344863, 14.430957936796794], [50.07199630349981, 14.431016976583797], [50.071937263550986, 14.431076016370799], [50.07187822360216, 14.431135056157801], [50.07181918365334, 14.431194095944804], [50.071760143704516, 14.431253135731806], [50.07170110375569, 14.431312175518809], [50.07170110375569, 14.431312175518809], [50.07173009002551, 14.431428353932017], [50.07175907629533, 14.431544532345224], [50.07178806256515, 14.43166071075843], [50.071817048834966, 14.431776889171639], [50.071846035104784, 14.431893067584845], [50.071875021374595, 14.432009245998053], [50.07190400764441, 14.43212542441126], [50.07193299391423, 14.432241602824467], [50.07196198018405, 14.432357781237673]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(map_51c6c0b7fa59148ead2403dbd56e3883);
        
    
            var poly_line_54b222054a170ea4b31438a54c3d125d = L.polyline(
                [[50.07598090361925, 14.428799990999991], [50.0760313337841, 14.429012574854385], [50.076081763948956, 14.42922515870878], [50.07613219411381, 14.429437742563174], [50.076182624278665, 14.429650326417569], [50.07623305444352, 14.429862910271964], [50.076283484608375, 14.430075494126358], [50.07633391477323, 14.430288077980753], [50.076384344938084, 14.430500661835149], [50.07643477510294, 14.430713245689542], [50.07643477510294, 14.430713245689542], [50.07643628897406, 14.430762738203432], [50.07643780284518, 14.430812230717322], [50.076439316716296, 14.43086172323121], [50.076440830587416, 14.4309112157451], [50.076442344458535, 14.43096070825899], [50.076443858329654, 14.43101020077288], [50.07644537220077, 14.431059693286768], [50.0764468860719, 14.431109185800658], [50.07644839994302, 14.431158678314548]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(map_51c6c0b7fa59148ead2403dbd56e3883);
        
    
            var poly_line_91fe05a80309fdcd50c556f4dacf105e = L.polyline(
                [[50.074100949876225, 14.433776006899764], [50.07409764264892, 14.433837511737021], [50.07409433542162, 14.433899016574278], [50.07409102819432, 14.433960521411535], [50.07408772096702, 14.43402202624879], [50.07408441373972, 14.434083531086047], [50.074081106512416, 14.434145035923304], [50.074077799285114, 14.43420654076056], [50.07407449205781, 14.434268045597817], [50.074071184830515, 14.434329550435073], [50.074071184830515, 14.434329550435073], [50.07416807075902, 14.434506670108933], [50.074264956687536, 14.434683789782794], [50.07436184261605, 14.434860909456654], [50.07445872854456, 14.435038029130514], [50.07455561447308, 14.435215148804375], [50.07465250040159, 14.435392268478234], [50.0747493863301, 14.435569388152095], [50.07484627225861, 14.435746507825955], [50.074943158187125, 14.435923627499815], [50.074943158187125, 14.435923627499815], [50.07500146266314, 14.435936811023847], [50.07505976713915, 14.43594999454788], [50.07511807161517, 14.435963178071912], [50.075176376091186, 14.435976361595944], [50.0752346805672, 14.435989545119977], [50.07529298504322, 14.43600272864401], [50.07535128951923, 14.436015912168042], [50.075409593995246, 14.436029095692074], [50.07546789847126, 14.436042279216107], [50.07546789847126, 14.436042279216107], [50.07561171353067, 14.435978697761803], [50.07575552859007, 14.4359151163075], [50.07589934364948, 14.435851534853198], [50.07604315870889, 14.435787953398894], [50.076186973768294, 14.435724371944591], [50.076330788827704, 14.435660790490289], [50.07647460388711, 14.435597209035985], [50.076618418946516, 14.435533627581682], [50.07676223400592, 14.43547004612738], [50.07676223400592, 14.43547004612738], [50.07675167790253, 14.435432476202163], [50.07674112179914, 14.435394906276946], [50.07673056569575, 14.435357336351728], [50.076720009592364, 14.435319766426511], [50.076709453488974, 14.435282196501294], [50.07669889738558, 14.435244626576077], [50.07668834128219, 14.43520705665086], [50.0766777851788, 14.435169486725643], [50.07666722907541, 14.435131916800426], [50.07666722907541, 14.435131916800426], [50.076637187781046, 14.4350596056426], [50.07660714648668, 14.434987294484772], [50.07657710519231, 14.434914983326944], [50.07654706389794, 14.434842672169117], [50.076517022603575, 14.43477036101129], [50.07648698130921, 14.434698049853463], [50.07645694001484, 14.434625738695635], [50.07642689872048, 14.434553427537807], [50.07639685742611, 14.434481116379981], [50.07639685742611, 14.434481116379981], [50.07622125174204, 14.434419048807586], [50.07604564605796, 14.43435698123519], [50.07587004037389, 14.434294913662796], [50.07569443468982, 14.434232846090401], [50.07551882900575, 14.434170778518006], [50.07534322332168, 14.434108710945612], [50.075167617637604, 14.434046643373216], [50.07499201195353, 14.433984575800821], [50.07481640626946, 14.433922508228427], [50.07481640626946, 14.433922508228427], [50.07477099102048, 14.433919480723523], [50.07472557577149, 14.433916453218618], [50.074680160522504, 14.433913425713715], [50.07463474527352, 14.43391039820881], [50.07458933002453, 14.433907370703906], [50.074543914775546, 14.433904343199004], [50.07449849952656, 14.433901315694099], [50.07445308427757, 14.433898288189194], [50.07440766902859, 14.433895260684292], [50.07440766902859, 14.433895260684292], [50.07437358912277, 14.433882010263789], [50.07433950921695, 14.433868759843286], [50.07430542931113, 14.433855509422783], [50.074271349405315, 14.43384225900228], [50.0742372694995, 14.433829008581776], [50.074203189593675, 14.433815758161273], [50.07416910968786, 14.43380250774077], [50.07413502978204, 14.433789257320267], [50.074100949876225, 14.433776006899764], [50.074100949876225, 14.433776006899764], [50.07406085141329, 14.43380288171804], [50.07402075295036, 14.433829756536316], [50.073980654487436, 14.43385663135459], [50.0739405560245, 14.433883506172867], [50.07390045756158, 14.433910380991142], [50.073860359098646, 14.433937255809417], [50.07382026063572, 14.433964130627691], [50.07378016217279, 14.433991005445968], [50.07374006370986, 14.434017880264243], [50.07374006370986, 14.434017880264243], [50.073718869891756, 14.43402544942566], [50.07369767607366, 14.434033018587074], [50.07367648225556, 14.434040587748491], [50.07365528843746, 14.434048156909908], [50.07363409461936, 14.434055726071325], [50.07361290080125, 14.43406329523274], [50.07359170698315, 14.434070864394156], [50.07357051316505, 14.434078433555573], [50.07354931934695, 14.43408600271699], [50.07354931934695, 14.43408600271699], [50.07341004592248, 14.434172291860513], [50.07327077249801, 14.434258581004038], [50.07313149907354, 14.434344870147562], [50.07299222564907, 14.434431159291085], [50.0728529522246, 14.43451744843461], [50.07271367880013, 14.434603737578135], [50.07257440537566, 14.434690026721658], [50.07243513195119, 14.434776315865182], [50.07229585852672, 14.434862605008705], [50.07229585852672, 14.434862605008705], [50.07223833248138, 14.435033669144145], [50.072180806436045, 14.435204733279585], [50.072123280390706, 14.435375797415025], [50.07206575434537, 14.435546861550465], [50.07200822830003, 14.435717925685905], [50.07195070225469, 14.435888989821345], [50.07189317620935, 14.436060053956783], [50.07183565016401, 14.436231118092223], [50.07177812411867, 14.436402182227663], [50.07177812411867, 14.436402182227663], [50.07180040331879, 14.43644625645108], [50.07182268251891, 14.436490330674495], [50.07184496171903, 14.436534404897909], [50.071867240919154, 14.436578479121325], [50.07188952011927, 14.43662255334474], [50.071911799319395, 14.436666627568155], [50.07193407851951, 14.43671070179157], [50.071956357719635, 14.436754776014986], [50.07197863691975, 14.4367988502384]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(map_51c6c0b7fa59148ead2403dbd56e3883);
        
    
            var poly_line_225a22cd924871a676a4ca1c7597782c = L.polyline(
                [[50.076829241355675, 14.44001079106341], [50.07681574860403, 14.439949422478762], [50.07680225585238, 14.439888053894112], [50.07678876310074, 14.439826685309464], [50.07677527034909, 14.439765316724817], [50.07676177759744, 14.439703948140167], [50.0767482848458, 14.43964257955552], [50.07673479209415, 14.439581210970871], [50.0767212993425, 14.439519842386222], [50.07670780659086, 14.439458473801574], [50.07670780659086, 14.439458473801574], [50.07667791392295, 14.439344043402528], [50.076648021255046, 14.439229613003482], [50.076618128587135, 14.439115182604436], [50.07658823591923, 14.43900075220539], [50.07655834325132, 14.438886321806343], [50.07652845058342, 14.438771891407297], [50.07649855791551, 14.438657461008251], [50.0764686652476, 14.438543030609205], [50.07643877257969, 14.438428600210159], [50.07643877257969, 14.438428600210159], [50.076358534066046, 14.438463456820571], [50.07627829555239, 14.438498313430983], [50.076198057038745, 14.438533170041397], [50.07611781852509, 14.43856802665181], [50.076037580011445, 14.438602883262222], [50.0759573414978, 14.438637739872636], [50.075877102984144, 14.438672596483048], [50.0757968644705, 14.43870745309346], [50.075716625956844, 14.438742309703875], [50.075716625956844, 14.438742309703875], [50.075506201797985, 14.438943650711527], [50.07529577763913, 14.43914499171918], [50.075085353480276, 14.439346332726833], [50.07487492932142, 14.439547673734486], [50.07466450516256, 14.439749014742139], [50.0744540810037, 14.439950355749792], [50.07424365684484, 14.440151696757447], [50.074033232685984, 14.4403530377651], [50.073822808527126, 14.440554378772752], [50.073822808527126, 14.440554378772752], [50.07374876642177, 14.440595252505469], [50.073674724316426, 14.440636126238187], [50.07360068221107, 14.440676999970906], [50.07352664010572, 14.440717873703623], [50.07345259800037, 14.440758747436341], [50.07337855589502, 14.44079962116906], [50.073304513789665, 14.440840494901776], [50.07323047168432, 14.440881368634495], [50.073156429578965, 14.440922242367213], [50.073156429578965, 14.440922242367213], [50.07309798041411, 14.440766998864083], [50.073039531249265, 14.440611755360955], [50.07298108208442, 14.440456511857825], [50.072922632919564, 14.440301268354697], [50.07286418375472, 14.440146024851567], [50.07280573458986, 14.439990781348438], [50.07274728542502, 14.439835537845308], [50.07268883626016, 14.439680294342178], [50.072630387095316, 14.43952505083905], [50.072630387095316, 14.43952505083905], [50.07262438418083, 14.439437306640654], [50.07261838126633, 14.439349562442258], [50.07261237835184, 14.439261818243862], [50.07260637543735, 14.439174074045468], [50.07260037252286, 14.439086329847072], [50.07259436960837, 14.438998585648676], [50.07258836669388, 14.43891084145028], [50.07258236377938, 14.438823097251884], [50.07257636086489, 14.43873535305349]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(map_51c6c0b7fa59148ead2403dbd56e3883);
        
    
            var poly_line_6986d528f6cdea74480f7ddcfa74fd8d = L.polyline(
                [[50.0792988962443, 14.443831063050553], [50.079188826811176, 14.443803918682978], [50.07907875737805, 14.4437767743154], [50.07896868794492, 14.443749629947826], [50.078858618511795, 14.443722485580249], [50.07874854907867, 14.443695341212674], [50.07863847964554, 14.443668196845097], [50.078528410212414, 14.443641052477522], [50.07841834077929, 14.443613908109945], [50.07830827134616, 14.44358676374237], [50.07830827134616, 14.44358676374237], [50.07817353928693, 14.443562542171241], [50.07803880722769, 14.443538320600112], [50.07790407516846, 14.443514099028983], [50.077769343109225, 14.443489877457854], [50.077634611049994, 14.443465655886724], [50.07749987899076, 14.443441434315595], [50.07736514693152, 14.443417212744466], [50.07723041487229, 14.443392991173337], [50.07709568281305, 14.443368769602207], [50.07709568281305, 14.443368769602207], [50.076717222153114, 14.44342932326033], [50.07633876149318, 14.443489876918452], [50.075960300833245, 14.443550430576575], [50.07558184017331, 14.443610984234699], [50.07520337951337, 14.44367153789282], [50.07482491885343, 14.443732091550944], [50.07444645819349, 14.443792645209067], [50.074067997533554, 14.443853198867188], [50.073689536873616, 14.443913752525312], [50.073689536873616, 14.443913752525312], [50.073586595687175, 14.443975820173222], [50.07348365450073, 14.444037887821134], [50.073380713314286, 14.444099955469044], [50.07327777212784, 14.444162023116956], [50.0731748309414, 14.444224090764866], [50.07307188975495, 14.444286158412778], [50.07296894856851, 14.444348226060688], [50.07286600738206, 14.4444102937086], [50.07276306619562, 14.44447236135651], [50.07276306619562, 14.44447236135651], [50.07270856778464, 14.444694896171477], [50.07265406937366, 14.444917430986443], [50.07259957096268, 14.445139965801408], [50.072545072551705, 14.445362500616374], [50.07249057414072, 14.44558503543134], [50.07243607572975, 14.445807570246307], [50.072381577318765, 14.446030105061274], [50.07232707890779, 14.446252639876239], [50.07227258049681, 14.446475174691205], [50.07227258049681, 14.446475174691205], [50.072291373625944, 14.446511267392184], [50.07231016675508, 14.446547360093161], [50.07232895988421, 14.44658345279414], [50.07234775301335, 14.446619545495118], [50.07236654614248, 14.446655638196097], [50.07238533927162, 14.446691730897074], [50.07240413240075, 14.446727823598053], [50.072422925529885, 14.44676391629903], [50.07244171865902, 14.446800009000007]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(map_51c6c0b7fa59148ead2403dbd56e3883);
        
    
            var poly_line_fdf90d904b2dda045b3ccd07c59f5c60 = L.polyline(
                [[50.07666031611648, 14.445456122987464], [50.076655774621784, 14.44539633797529], [50.076651233127095, 14.445336552963116], [50.076646691632405, 14.445276767950942], [50.07664215013771, 14.445216982938767], [50.07663760864302, 14.445157197926592], [50.07663306714833, 14.44509741291442], [50.07662852565363, 14.445037627902245], [50.07662398415894, 14.44497784289007], [50.07661944266425, 14.444918057877896], [50.07661944266425, 14.444918057877896], [50.07659219356664, 14.444712175224518], [50.076564944469034, 14.444506292571141], [50.07653769537142, 14.444300409917764], [50.076510446273815, 14.444094527264387], [50.0764831971762, 14.44388864461101], [50.076455948078596, 14.44368276195763], [50.07642869898098, 14.443476879304253], [50.07640144988338, 14.443270996650876], [50.076374200785764, 14.443065113997498], [50.076374200785764, 14.443065113997498], [50.076359062365846, 14.442933409400016], [50.07634392394592, 14.442801704802534], [50.076328785525995, 14.442670000205052], [50.07631364710607, 14.44253829560757], [50.07629850868614, 14.442406591010087], [50.07628337026622, 14.442274886412605], [50.07626823184629, 14.442143181815123], [50.07625309342637, 14.442011477217639], [50.07623795500645, 14.441879772620156], [50.07623795500645, 14.441879772620156], [50.07623518157004, 14.441847308251697], [50.07623240813364, 14.441814843883236], [50.076229634697235, 14.441782379514775], [50.076226861260835, 14.441749915146314], [50.076224087824436, 14.441717450777853], [50.07622131438803, 14.441684986409392], [50.07621854095163, 14.441652522040933], [50.07621576751523, 14.441620057672472], [50.07621299407882, 14.44158759330401]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(map_51c6c0b7fa59148ead2403dbd56e3883);
        
</script>" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen=""></iframe></div></div>
</div>
</div>
<p>Okay that worked and is looking a lot more like what I want. Now I just need to figure out how to snap the vectors to roads.</p>
</section>
<section id="snap-to-roads" class="level2">
<h2 class="anchored" data-anchor-id="snap-to-roads">Snap to Roads</h2>
<div class="cell" data-execution_count="3">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the bounding box of the points</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>min_x <span class="op">=</span> <span class="bu">min</span>(p.x <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> p <span class="kw">in</span> path)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>max_x <span class="op">=</span> <span class="bu">max</span>(p.x <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> p <span class="kw">in</span> path)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>min_y <span class="op">=</span> <span class="bu">min</span>(p.y <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> p <span class="kw">in</span> path)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>max_y <span class="op">=</span> <span class="bu">max</span>(p.y <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> p <span class="kw">in</span> path)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the highways, streets, and footways</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> overpy</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>api <span class="op">=</span> overpy.Overpass()</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> api.query(<span class="ss">f"""</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="ss">(</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="ss">  way["highway"="residential"](</span><span class="sc">{</span>min_y<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>min_x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>max_y<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>max_x<span class="sc">}</span><span class="ss">);</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="ss">  way["highway"="primary"](</span><span class="sc">{</span>min_y<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>min_x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>max_y<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>max_x<span class="sc">}</span><span class="ss">);</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="ss">  way["highway"="tertiary"](</span><span class="sc">{</span>min_y<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>min_x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>max_y<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>max_x<span class="sc">}</span><span class="ss">);</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="ss">    way["highway"="footway"](</span><span class="sc">{</span>min_y<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>min_x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>max_y<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>max_x<span class="sc">}</span><span class="ss">);</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="ss">);</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="ss">(._;&gt;;);</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="ss">out geom;</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="ss">"""</span>)</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>roads <span class="op">=</span> [shapely.geometry.LineString([(n.lon, n.lat) <span class="cf">for</span> n <span class="kw">in</span> w.nodes]) <span class="cf">for</span> w <span class="kw">in</span> result.ways]</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>road_points <span class="op">=</span> []</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> path <span class="kw">in</span> points:</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    road_points.append([])</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> point <span class="kw">in</span> path:</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Find the closest road</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>        closest_road <span class="op">=</span> <span class="bu">min</span>(roads, key<span class="op">=</span><span class="kw">lambda</span> r: r.distance(point))</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Find the closest point on the road</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>        closest_point <span class="op">=</span> closest_road.interpolate(closest_road.project(point))</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>        road_points[<span class="op">-</span><span class="dv">1</span>].append(closest_point)</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the road_points</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> folium</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> folium.Map(location<span class="op">=</span>[prague[<span class="dv">1</span>], prague[<span class="dv">0</span>]], zoom_start<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> path <span class="kw">in</span> road_points:</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>    folium.PolyLine([(p.y, p.x) <span class="cf">for</span> p <span class="kw">in</span> path]).add_to(m)</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="3">
<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -&gt; Trust Notebook</span><iframe srcdoc="<!DOCTYPE html>
<head>    
    <meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js&quot;></script>
    <script src=&quot;https://code.jquery.com/jquery-1.12.4.min.js&quot;></script>
    <script src=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js&quot;></script>
    <script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;></script>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/>
    
            <meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; />
            <style>
                #map_ffefe9204f6e961c74eaa3719cfcb528 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
            </style>
        
</head>
<body>    
    
            <div class=&quot;folium-map&quot; id=&quot;map_ffefe9204f6e961c74eaa3719cfcb528&quot; ></div>
        
</body>
<script>    
    
            var map_ffefe9204f6e961c74eaa3719cfcb528 = L.map(
                &quot;map_ffefe9204f6e961c74eaa3719cfcb528&quot;,
                {
                    center: [50.0755, 14.4378],
                    crs: L.CRS.EPSG3857,
                    zoom: 15,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );

            

        
    
            var tile_layer_672ca4a8297a0fb16affd6d83f149562 = L.tileLayer(
                &quot;https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,
                {&quot;attribution&quot;: &quot;Data by \u0026copy; \u003ca href=\&quot;http://openstreetmap.org\&quot;\u003eOpenStreetMap\u003c/a\u003e, under \u003ca href=\&quot;http://www.openstreetmap.org/copyright\&quot;\u003eODbL\u003c/a\u003e.&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 18, &quot;maxZoom&quot;: 18, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            ).addTo(map_ffefe9204f6e961c74eaa3719cfcb528);
        
    
            var poly_line_0c99cdeec2185b8f1cb35e59222ce722 = L.polyline(
                [[50.07853988508363, 14.43028565849492], [50.078248114879415, 14.430339879528585], [50.07791637135702, 14.430249794062576], [50.07758290438894, 14.430196368049081], [50.0771765519819, 14.430149989740132], [50.07705400545055, 14.430118110440311], [50.07662778959879, 14.430263382800717], [50.076324023684464, 14.430218233529413], [50.076020257770146, 14.43017308425811], [50.07571713693216, 14.429950371951705], [50.07571713693216, 14.429950371951705], [50.075584345171634, 14.429952391334755], [50.0753475, 14.4299087], [50.07520963445949, 14.42995195175536], [50.07500096479255, 14.430079121128093], [50.07481432259709, 14.430100585502501], [50.07462768040164, 14.430122049876909], [50.07444103820618, 14.430143514251316], [50.07425439601072, 14.430164978625724], [50.074067753815264, 14.430186443000132], [50.074067753815264, 14.430186443000132], [50.07373046586721, 14.430060075647894], [50.07361332102619, 14.430139418910096], [50.0734565552554, 14.430307166192751], [50.07323864734293, 14.430333724272286], [50.07302982784674, 14.430358049522109], [50.072834031043826, 14.430496282424883], [50.07264272085141, 14.430657416971357], [50.07243306905445, 14.430686404121772], [50.07222341725747, 14.430715391272189], [50.07222341725747, 14.430715391272189], [50.072157474876015, 14.43072450868381], [50.07199206776968, 14.430911068655886], [50.0719973063245, 14.430963712079546], [50.072002544879325, 14.431016355503203], [50.07192244708966, 14.431077147880677], [50.07192658738959, 14.431131362691325], [50.07193072768952, 14.431185577501973], [50.07193486798945, 14.43123979231262], [50.07193900828938, 14.431294007123268], [50.07193900828938, 14.431294007123268], [50.07194799727918, 14.43141171269734], [50.07195698626898, 14.431529418271412], [50.071965975258784, 14.431647123845481], [50.07197496424858, 14.431764829419553], [50.07198395323839, 14.431882534993623], [50.071992942228185, 14.432000240567692], [50.071898055451854, 14.432165581647455], [50.071933905019, 14.432235413435565], [50.07196864777884, 14.432313084322008]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(map_ffefe9204f6e961c74eaa3719cfcb528);
        
    
            var poly_line_932340cfc62b136f0aa3c9cf33d5f194 = L.polyline(
                [[50.07595672910059, 14.429022800389802], [50.07602936921098, 14.42903068174393], [50.07608133046046, 14.429234184736439], [50.07614183073667, 14.429237090352796], [50.07578803712049, 14.429632495549313], [50.07618334979642, 14.430197324917758], [50.07626360375684, 14.430209253207476], [50.076329309305656, 14.430322940220591], [50.076366804618196, 14.43050347887569], [50.0764440788516, 14.430711746235383], [50.0764440788516, 14.430711746235383], [50.07645189177903, 14.430760223551365], [50.07641692970352, 14.43081558302142], [50.076424716581975, 14.430864068067024], [50.07643250346043, 14.43091255311263], [50.07644029033888, 14.430961038158237], [50.076448077217336, 14.431009523203844], [50.07645586409579, 14.43105800824945], [50.07646365097425, 14.431106493295056], [50.0764714378527, 14.431154978340663]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(map_ffefe9204f6e961c74eaa3719cfcb528);
        
    
            var poly_line_4a938e71dcac6893ac93d8e4cb709c6d = L.polyline(
                [[50.07416730740621, 14.433779330711642], [50.07412611967791, 14.433896705644118], [50.07409940620154, 14.43390955697424], [50.07410834711727, 14.433996595305628], [50.07408166231162, 14.434009406567196], [50.0740888488303, 14.434093010987763], [50.07406252806592, 14.434105324931274], [50.074036207301546, 14.434117638874783], [50.07422455976948, 14.43424455970268], [50.0742338762089, 14.434304088911006], [50.0742338762089, 14.434304088911006], [50.07426324937143, 14.434491774466924], [50.07429262253395, 14.434679460022842], [50.074383505084405, 14.434857340425335], [50.07446727073461, 14.43503683937186], [50.074495484784656, 14.4352244119024], [50.07464364337445, 14.435366267706685], [50.07474047268182, 14.435539805174473], [50.07483728612116, 14.435755607416313], [50.07492102245058, 14.435924088079453], [50.07492102245058, 14.435924088079453], [50.07501659885574, 14.435937693695985], [50.075045691987135, 14.435963981176926], [50.07508125193201, 14.435999766184741], [50.075116811876875, 14.436035551192552], [50.07529129983848, 14.435981077973985], [50.075294503633025, 14.436002501546039], [50.075297707427566, 14.436023925118093], [50.07543053337563, 14.436038797186264], [50.07543539837639, 14.436027947186576], [50.07543539837639, 14.436027947186576], [50.07561532904167, 14.43597747525089], [50.07586778788304, 14.435898238302311], [50.07586161884973, 14.435857206716516], [50.076033638180704, 14.435789331360501], [50.07602757537652, 14.435747442604093], [50.07602151257234, 14.435705553847686], [50.07661991285839, 14.435380904630268], [50.076689576692246, 14.435427703399807], [50.0767592405261, 14.435474502169342], [50.0767592405261, 14.435474502169342], [50.076734576352884, 14.435457933271332], [50.07675792534533, 14.435370874081636], [50.07673319198303, 14.435353580272611], [50.07670845862073, 14.435336286463592], [50.07668372525843, 14.435318992654567], [50.07671788668031, 14.43521676961161], [50.07669319422323, 14.435199937470918], [50.07666850176616, 14.435183105330227], [50.076643809309076, 14.435166273189534], [50.076643809309076, 14.435166273189534], [50.07658964460086, 14.435129350659457], [50.07653547989264, 14.435092428129378], [50.07648131518442, 14.435055505599296], [50.0764271504762, 14.435018583069217], [50.07637298576798, 14.43498166053914], [50.076318821059765, 14.434944738009062], [50.07620279021985, 14.434513886819067], [50.07622457611347, 14.434464384919192], [50.076246362007076, 14.434414883019318], [50.076246362007076, 14.434414883019318], [50.07624075169103, 14.434427630777474], [50.07603012746702, 14.43435017199637], [50.07602461402422, 14.434362737404307], [50.07549341421593, 14.434233165621356], [50.07549331511333, 14.434170819073469], [50.0753352223773, 14.434108729305759], [50.07533507902392, 14.434046259091605], [50.07486281750195, 14.433720997035072], [50.07474575825842, 14.43377837420932], [50.07474575825842, 14.43377837420932], [50.07471033698535, 14.433795736123646], [50.07467491571227, 14.433813098037975], [50.0746394944392, 14.4338304599523], [50.07460407316612, 14.433847821866626], [50.074568651893046, 14.433865183780954], [50.07453323061997, 14.43388254569528], [50.0744978093469, 14.433899907609606], [50.07446238807382, 14.433917269523935], [50.07438995144528, 14.433857672514575], [50.07438995144528, 14.433857672514575], [50.07436717725482, 14.433868407371307], [50.074330298932914, 14.433870073936841], [50.07432776621045, 14.433852322466185], [50.07424710506729, 14.433845265519848], [50.074244970629806, 14.433828053571846], [50.07416557714332, 14.433813874174493], [50.074166153897615, 14.433802359686876], [50.07416673065192, 14.43379084519926], [50.07416730740621, 14.433779330711642], [50.07416730740621, 14.433779330711642], [50.07416586427707, 14.433808141754152], [50.07406671043271, 14.433925286268057], [50.07402364907192, 14.433946002245085], [50.07398058771113, 14.433966718222116], [50.07393752635034, 14.433987434199144], [50.07389446498955, 14.434008150176174], [50.073851403628765, 14.434028866153202], [50.07380834226797, 14.434049582130234], [50.07376528090718, 14.434070298107262], [50.07376528090718, 14.434070298107262], [50.07374511327704, 14.434080000359003], [50.07372494564691, 14.434089702610743], [50.07370477801677, 14.434099404862483], [50.073684610386636, 14.434109107114223], [50.073664442756495, 14.434118809365962], [50.073644275126355, 14.434128511617704], [50.07362410749622, 14.434138213869444], [50.07360393986608, 14.434147916121184], [50.07358377223595, 14.434157618372923], [50.07358377223595, 14.434157618372923], [50.07343696388008, 14.434228244996701], [50.073290368863816, 14.4342990142673], [50.07314372133385, 14.43437008838821], [50.072997073803876, 14.43444116250912], [50.07285042627392, 14.434512236630027], [50.07270377874394, 14.434583310750938], [50.07256496748593, 14.434691906779374], [50.072441420876835, 14.434789763985558], [50.0722942418479, 14.434859199327787], [50.0722942418479, 14.434859199327787], [50.07221216970227, 14.434979450307527], [50.07209855333145, 14.435034274796553], [50.07198493696063, 14.43508909928558], [50.071871320589814, 14.435143923774607], [50.071624936776885, 14.435858004638336], [50.07167331014427, 14.435990366433908], [50.071721683511655, 14.436122728229476], [50.071770056879046, 14.436255090025046], [50.071759400569064, 14.436408986281068], [50.071759400569064, 14.436408986281068], [50.07180570862845, 14.436461212625558], [50.07184799264777, 14.436482182673572], [50.07186294104748, 14.436528616875824], [50.07187714561918, 14.43657549326362], [50.07189118132293, 14.436622052560491], [50.07190759685009, 14.436668140672685], [50.07192420146704, 14.436714258037137], [50.071940806083994, 14.436760375401592], [50.07195741070095, 14.436806492766042]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(map_ffefe9204f6e961c74eaa3719cfcb528);
        
    
            var poly_line_61ac242acf5540e4a699cfefc7ff3a92 = L.polyline(
                [[50.07721406044819, 14.440073625206178], [50.07722347024399, 14.44001599620193], [50.077232880039794, 14.439958367197683], [50.077242289835596, 14.439900738193433], [50.07690950940825, 14.439308642382082], [50.076880485273335, 14.439300110760751], [50.07685146113843, 14.439291579139422], [50.076822437003514, 14.43928304751809], [50.076793412868604, 14.43927451589676], [50.07676438873369, 14.43926598427543], [50.07676438873369, 14.43926598427543], [50.076705912082524, 14.439248795110412], [50.07664743543136, 14.439231605945398], [50.07661701869806, 14.439118383110568], [50.07655819501582, 14.439002416596951], [50.07656116335965, 14.438886828469874], [50.07651483242637, 14.438769481615024], [50.07653355897833, 14.438663654598944], [50.076481549711765, 14.438545282752576], [50.07650007235248, 14.438439315120398], [50.07650007235248, 14.438439315120398], [50.07649178134208, 14.438486747813952], [50.076483490331675, 14.438534180507508], [50.07601599106509, 14.438558321643628], [50.07601921356451, 14.438581648487327], [50.07602243606392, 14.438604975331028], [50.07597548647252, 14.438635459099917], [50.07591336384488, 14.438667220559243], [50.075916694714074, 14.438689687429715], [50.075920025583265, 14.438712154300188], [50.075920025583265, 14.438712154300188], [50.0755092160005, 14.439009868972951], [50.07530546311517, 14.439144828564148], [50.07523078157616, 14.439345785661896], [50.07523153598345, 14.439546332267419], [50.075232290390744, 14.439746878872942], [50.074461527415366, 14.440451333779126], [50.0742479050879, 14.440454430251968], [50.074034697506974, 14.440457422182636], [50.07382329894291, 14.440536608412387], [50.07382329894291, 14.440536608412387], [50.07374791914058, 14.440648957098091], [50.073674540152155, 14.440647799419876], [50.073601161163715, 14.44064664174166], [50.073526027516365, 14.440717616180667], [50.073500305560046, 14.440778802946033], [50.07335874931392, 14.44079131562301], [50.07328331219136, 14.440831638611007], [50.073257774957675, 14.440892773705201], [50.07323223772399, 14.4409539087994], [50.07323223772399, 14.4409539087994], [50.07327876804039, 14.440842517122785], [50.07332529835679, 14.44073112544617], [50.072612694957186, 14.440625096551129], [50.072543831921685, 14.440474618738925], [50.07318500439332, 14.439909144671118], [50.0730901994042, 14.439780744747166], [50.072995394415074, 14.439652344823218], [50.07252433370273, 14.439531083084514], [50.07257520513379, 14.43947499830486], [50.07257520513379, 14.43947499830486], [50.07261615970713, 14.439429846671137], [50.072611219068314, 14.439343200481566], [50.07261913799981, 14.439267797502897], [50.07265939726046, 14.439223838555215], [50.072646733465405, 14.43906957770571], [50.072617996202645, 14.438990048375155], [50.072589258939885, 14.4389105190446], [50.072560521677126, 14.438830989714042], [50.07258474884507, 14.438732155478696]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(map_ffefe9204f6e961c74eaa3719cfcb528);
        
    
            var poly_line_6ea0369822f27701da4725a4ccfb5d5d = L.polyline(
                [[50.07925634725291, 14.443846210700064], [50.07923538972726, 14.443787342056602], [50.07921443220161, 14.443728473413136], [50.079177702415144, 14.443648786838336], [50.07857906647744, 14.443667942836765], [50.07858013197805, 14.443662481746141], [50.07858119747867, 14.443657020655516], [50.07850195932193, 14.443647136182332], [50.07843056686865, 14.443613633225974], [50.07831300682528, 14.443635967545806], [50.07831300682528, 14.443635967545806], [50.07818182101673, 14.443648593148193], [50.078050635208164, 14.443661218750583], [50.07778341446717, 14.443510809403172], [50.07778397426874, 14.443490276353595], [50.077647952557655, 14.443466116820094], [50.07764862775944, 14.443446573410291], [50.07764930296122, 14.443427030000489], [50.077065938584, 14.443396343944562], [50.07706538908201, 14.443369387125564], [50.07706538908201, 14.443369387125564], [50.07688943081829, 14.443431855411166], [50.07631932661503, 14.443490166224247], [50.07618488070422, 14.443549641945928], [50.07541768326053, 14.443612288511721], [50.07525653491243, 14.443671181521655], [50.07482424169849, 14.443817568486182], [50.07441734836693, 14.443792818110198], [50.07406775561981, 14.44383716889851], [50.07368984520653, 14.44394373197177], [50.07368984520653, 14.44394373197177], [50.073585188917626, 14.443975783346794], [50.073480775482246, 14.444024487298737], [50.07337819279919, 14.4440340945005], [50.07327303029113, 14.444038119094966], [50.07316786778308, 14.44404214368943], [50.07306270527502, 14.444046168283894], [50.07269152034335, 14.444349875377938], [50.072691885685764, 14.444411328866133], [50.07269225102818, 14.444472782354328], [50.07269225102818, 14.444472782354328], [50.07269357202999, 14.444694985321586], [50.07264515562733, 14.444917463346746], [50.07258600673329, 14.445140016721126], [50.072586841342655, 14.445362343817564], [50.07241297794934, 14.445599585723192], [50.07238546924846, 14.44579502155442], [50.07233032770246, 14.446017396893705], [50.07227612819017, 14.446253979964894], [50.07228415373042, 14.44647435797544], [50.07228415373042, 14.44647435797544], [50.072286781274656, 14.446511591471506], [50.07228940881888, 14.446548824967568], [50.07229203636311, 14.446586058463632], [50.07229466390734, 14.446623291959696], [50.07229729145157, 14.44666052545576], [50.0722999189958, 14.446697758951824], [50.07230254654003, 14.446734992447889], [50.072305174084256, 14.44677222594395], [50.07230962619952, 14.446817704224484]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(map_ffefe9204f6e961c74eaa3719cfcb528);
        
    
            var poly_line_d262e7fe76d204dd3da10d6398dedfe2 = L.polyline(
                [[50.076661283160284, 14.44545488163797], [50.0766292648761, 14.445411024983823], [50.0766128, 14.4453505], [50.07664757315328, 14.445284147082036], [50.07657823765501, 14.445219411782563], [50.07657596239314, 14.445159540647532], [50.07657368713127, 14.445099669512505], [50.0765714118694, 14.445039798377474], [50.07656913660753, 14.444979927242443], [50.07656686134567, 14.444920056107414], [50.07656686134567, 14.444920056107414], [50.076515932007474, 14.444795897818345], [50.07643597669317, 14.444516176715643], [50.0764218, 14.444300409917764], [50.07648138924696, 14.44407338594197], [50.07648290445042, 14.443904145138003], [50.07645560502686, 14.443809911634299], [50.076319153101466, 14.443478509994067], [50.076316082993536, 14.443272267414489], [50.076313012885606, 14.443066024834911], [50.076313012885606, 14.443066024834911], [50.07631104942372, 14.442934124116224], [50.076309085961846, 14.442802223397537], [50.07632883479566, 14.442659803083817], [50.07630735121735, 14.442538276147786], [50.07630775815084, 14.442406619598994], [50.07630816508433, 14.442274963050204], [50.076237272268656, 14.442143387471203], [50.07623494144683, 14.442011890065302], [50.07623458739651, 14.441879745813312], [50.07623458739651, 14.441879745813312], [50.076234584455385, 14.441847312024306], [50.07623437924089, 14.441814831429653], [50.07623417402639, 14.441782350835], [50.07623396881189, 14.441749870240347], [50.07623376359739, 14.441717389645694], [50.076233558382896, 14.441684909051041], [50.0762333531684, 14.44165242845639], [50.0762331479539, 14.441619947861735], [50.0762329427394, 14.441587467267082]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(map_ffefe9204f6e961c74eaa3719cfcb528);
        
</script>" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen=""></iframe></div></div>
</div>
</div>
<p>Okay! That.. actually did work. In the sense that it did what I asked for. However Iâ€™m realising once again that perhaps what I asked for is not exactly what I wanted. Snapping the text to the nearest road is nice, doing so without asking me to run through buildings would be nicer.</p>
<p>Lets have one more attempt.</p>
</section>
<section id="snap-to-roads-attempt-2" class="level2">
<h2 class="anchored" data-anchor-id="snap-to-roads-attempt-2">Snap to Roads (Attempt 2)</h2>
<div class="cell" data-execution_count="4">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use mapbox to snap the points to the roads</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> mapbox</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> dotenv</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>dotenv.load_dotenv()</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>mapbox_token <span class="op">=</span> os.environ[<span class="st">'MAPBOX_TOKEN'</span>]</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the map matching API to snap the points to the roads</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mapbox <span class="im">import</span> MapMatcher</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>mm <span class="op">=</span> MapMatcher(access_token<span class="op">=</span>mapbox_token)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Create mapbox linestrings from shapely linestrings</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>mapbox_linestrings <span class="op">=</span> []</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> create_linestring(path):</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">'type'</span>: <span class="st">'Feature'</span>,</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">'properties'</span>: {},</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">'geometry'</span>: {</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>            <span class="st">'type'</span>: <span class="st">'LineString'</span>,</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>            <span class="st">'coordinates'</span>: [(p.x, p.y) <span class="cf">for</span> p <span class="kw">in</span> path]</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> path <span class="kw">in</span> points:</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(path) <span class="op">&gt;</span> <span class="dv">100</span>:</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(path), <span class="dv">100</span>):</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>            mapbox_linestrings.append(create_linestring(path[i:i<span class="op">+</span><span class="dv">100</span>]))</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>        mapbox_linestrings.append(create_linestring(path))</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>responses <span class="op">=</span> [mm.match(feature<span class="op">=</span>linestring) <span class="cf">for</span> linestring <span class="kw">in</span> mapbox_linestrings]</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>geometries <span class="op">=</span> [response.geojson()[<span class="st">'features'</span>][<span class="dv">0</span>][<span class="st">'geometry'</span>] <span class="cf">for</span> response <span class="kw">in</span> responses]</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the points</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> folium</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> folium.Map(location<span class="op">=</span>[prague[<span class="dv">1</span>], prague[<span class="dv">0</span>]], zoom_start<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> path <span class="kw">in</span> geometries:</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>    folium.PolyLine([(p[<span class="dv">1</span>], p[<span class="dv">0</span>]) <span class="cf">for</span> p <span class="kw">in</span> path[<span class="st">'coordinates'</span>]]).add_to(m)</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="4">
<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -&gt; Trust Notebook</span><iframe srcdoc="<!DOCTYPE html>
<head>    
    <meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js&quot;></script>
    <script src=&quot;https://code.jquery.com/jquery-1.12.4.min.js&quot;></script>
    <script src=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js&quot;></script>
    <script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;></script>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/>
    
            <meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; />
            <style>
                #map_696076272d492d27e6d3ac7241ab2e03 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
            </style>
        
</head>
<body>    
    
            <div class=&quot;folium-map&quot; id=&quot;map_696076272d492d27e6d3ac7241ab2e03&quot; ></div>
        
</body>
<script>    
    
            var map_696076272d492d27e6d3ac7241ab2e03 = L.map(
                &quot;map_696076272d492d27e6d3ac7241ab2e03&quot;,
                {
                    center: [50.0755, 14.4378],
                    crs: L.CRS.EPSG3857,
                    zoom: 15,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );

            

        
    
            var tile_layer_43a642363ac20e7e9e8796b23f205a2c = L.tileLayer(
                &quot;https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,
                {&quot;attribution&quot;: &quot;Data by \u0026copy; \u003ca href=\&quot;http://openstreetmap.org\&quot;\u003eOpenStreetMap\u003c/a\u003e, under \u003ca href=\&quot;http://www.openstreetmap.org/copyright\&quot;\u003eODbL\u003c/a\u003e.&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 18, &quot;maxZoom&quot;: 18, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            ).addTo(map_696076272d492d27e6d3ac7241ab2e03);
        
    
            var poly_line_de1aedb0c23b69164fab57c7a94b94bd = L.polyline(
                [[50.075717, 14.429948], [50.075717, 14.429948], [50.075711, 14.430104], [50.075708, 14.43015], [50.075711, 14.430178], [50.075718, 14.430205], [50.075729, 14.430224], [50.075753, 14.430242], [50.075789, 14.430248], [50.0759, 14.430266], [50.076415, 14.430334], [50.076534, 14.430349], [50.076945, 14.430402], [50.076978, 14.430405], [50.077095, 14.430416], [50.077112, 14.430106], [50.077147, 14.429433], [50.077151, 14.42936], [50.077159, 14.429218], [50.077067, 14.429209], [50.076603, 14.429164], [50.076323, 14.429137], [50.075795, 14.429108], [50.075665, 14.429099], [50.075621, 14.429099], [50.075539, 14.429092], [50.07551, 14.429089], [50.075427, 14.429085], [50.075425, 14.42995], [50.075425, 14.429951], [50.075425, 14.430028], [50.075423, 14.43021], [50.075418, 14.430365], [50.075417, 14.43041], [50.075404, 14.43086], [50.0754, 14.430883], [50.075393, 14.430901], [50.075383, 14.430914], [50.075372, 14.43092], [50.075339, 14.430935], [50.0753, 14.430953], [50.07473, 14.431194], [50.07441, 14.431336], [50.073945, 14.431522], [50.073891, 14.431545], [50.073813, 14.431575], [50.073032, 14.431893], [50.072175, 14.432245], [50.07212, 14.43225], [50.072069, 14.432255], [50.070735, 14.432059], [50.070735, 14.431999], [50.070727, 14.430995], [50.070726, 14.430927], [50.070726, 14.430779], [50.070817, 14.430768], [50.071672, 14.430659], [50.071969, 14.43062], [50.072151, 14.430589], [50.072561, 14.430536], [50.072893, 14.430488], [50.073129, 14.430458], [50.073596, 14.430405], [50.073637, 14.4304], [50.073726, 14.430389], [50.0738, 14.430378], [50.074453, 14.430281], [50.0748, 14.430234], [50.074841, 14.430229], [50.074907, 14.43022], [50.075188, 14.430192], [50.075253, 14.430191], [50.075253, 14.430056], [50.075254, 14.429954]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(map_696076272d492d27e6d3ac7241ab2e03);
        
    
            var poly_line_9b9c12d6c00a586a54958a39077a3f06 = L.polyline(
                [[50.076029, 14.429121], [50.075795, 14.429108], [50.075775, 14.42912], [50.075762, 14.429134], [50.075755, 14.429151], [50.07575, 14.429174], [50.075747, 14.429232], [50.075711, 14.430104], [50.075708, 14.43015], [50.075711, 14.430178], [50.075718, 14.430205], [50.075729, 14.430224], [50.075753, 14.430242], [50.075789, 14.430248], [50.0759, 14.430266], [50.076415, 14.430334], [50.076534, 14.430349], [50.076945, 14.430402], [50.076978, 14.430405], [50.077095, 14.430416], [50.077112, 14.430106], [50.077147, 14.429433], [50.077151, 14.42936], [50.077159, 14.429218], [50.077067, 14.429209], [50.076603, 14.429164], [50.076323, 14.429137], [50.076084, 14.429124]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(map_696076272d492d27e6d3ac7241ab2e03);
        
    
            var poly_line_545211296e4b0433dbb429bb89ac76f2 = L.polyline(
                [[50.074232, 14.433728], [50.074234, 14.433741], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.43478], [50.072572, 14.434725], [50.073376, 14.434348], [50.074128, 14.433987], [50.07417, 14.433967], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.43478], [50.072572, 14.434725], [50.073376, 14.434348], [50.074113, 14.433994], [50.07417, 14.433967], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.43478], [50.072572, 14.434725], [50.073376, 14.434348], [50.074099, 14.434001], [50.07417, 14.433967], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.43478], [50.072572, 14.434725], [50.073376, 14.434348], [50.074085, 14.434008], [50.07417, 14.433967], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.43478], [50.072572, 14.434725], [50.073376, 14.434348], [50.07407, 14.434015], [50.07417, 14.433967], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.43478], [50.072572, 14.434725], [50.073376, 14.434348], [50.074057, 14.434021], [50.07417, 14.433967], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.43478], [50.072572, 14.434725], [50.073376, 14.434348], [50.074043, 14.434028]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(map_696076272d492d27e6d3ac7241ab2e03);
        
    
            var poly_line_ed0310cbe901fd3a1d1d34f1f8e0cc0c = L.polyline(
                [[50.073768, 14.43416], [50.07417, 14.433967], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.43478], [50.072572, 14.434725], [50.073376, 14.434348], [50.073748, 14.43417], [50.07417, 14.433967], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.43478], [50.072572, 14.434725], [50.073376, 14.434348], [50.073727, 14.43418], [50.07417, 14.433967], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.43478], [50.072572, 14.434725], [50.073376, 14.434348], [50.073705, 14.43419], [50.07417, 14.433967], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.43478], [50.072572, 14.434725], [50.073376, 14.434348], [50.073685, 14.4342], [50.07417, 14.433967], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.43478], [50.072572, 14.434725], [50.073376, 14.434348], [50.073664, 14.43421], [50.07417, 14.433967], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.43478], [50.072572, 14.434725], [50.073376, 14.434348], [50.073644, 14.434219], [50.07417, 14.433967], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.43478], [50.072572, 14.434725], [50.073376, 14.434348], [50.073623, 14.434229], [50.07417, 14.433967], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.43478], [50.072572, 14.434725], [50.073376, 14.434348], [50.073603, 14.434239], [50.07417, 14.433967], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.43478], [50.072572, 14.434725], [50.073376, 14.434348], [50.073581, 14.434249], [50.073581, 14.434249], [50.07417, 14.433967], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.43478], [50.072572, 14.434725], [50.073376, 14.434348], [50.073439, 14.434318], [50.07417, 14.433967], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.43478], [50.072572, 14.434725], [50.073295, 14.434386], [50.073376, 14.434348], [50.07417, 14.433967], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.43478], [50.072572, 14.434725], [50.073152, 14.434453], [50.073376, 14.434348], [50.07417, 14.433967], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.43478], [50.072572, 14.434725], [50.073009, 14.43452], [50.073376, 14.434348], [50.07417, 14.433967], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.43478], [50.072572, 14.434725], [50.072867, 14.434587], [50.073376, 14.434348], [50.07417, 14.433967], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.43478], [50.072572, 14.434725], [50.072724, 14.434654], [50.073376, 14.434348], [50.07417, 14.433967], [50.074256, 14.433918], [50.074362, 14.434726], [50.074431, 14.435144], [50.074452, 14.435277], [50.074458, 14.435314], [50.074465, 14.435363], [50.074487, 14.435517], [50.074457, 14.435524], [50.074398, 14.435536], [50.073229, 14.435951], [50.073164, 14.435974], [50.07311, 14.435994], [50.073037, 14.436021], [50.072845, 14.43609], [50.072821, 14.436006], [50.07249, 14.434863], [50.072462, 14.434781], [50.072462, 14.43478], [50.072456, 14.43476], [50.072412, 14.434625], [50.072247, 14.434038], [50.072161, 14.433735], [50.072139, 14.433642], [50.072133, 14.43362], [50.072, 14.433671], [50.071129, 14.434021], [50.07108, 14.434037], [50.070943, 14.434081], [50.070947, 14.434095], [50.070984, 14.434215], [50.071002, 14.434275], [50.071239, 14.434948], [50.071358, 14.435304], [50.071454, 14.435258], [50.072295, 14.434858], [50.072295, 14.434858], [50.07238, 14.434818], [50.072462, 14.43478], [50.072412, 14.434625], [50.072247, 14.434038], [50.072161, 14.433735], [50.072139, 14.433642], [50.072133, 14.43362], [50.072, 14.433671], [50.071129, 14.434021], [50.07108, 14.434037], [50.070943, 14.434081], [50.070947, 14.434095], [50.070984, 14.434215], [50.071002, 14.434275], [50.071239, 14.434948], [50.071358, 14.435304], [50.071454, 14.435258], [50.072211, 14.434898]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(map_696076272d492d27e6d3ac7241ab2e03);
        
    
            var poly_line_b87eec6ffa0803c76e088024c789da6c = L.polyline(
                [[50.076706, 14.439149], [50.07733, 14.439366], [50.077413, 14.439395], [50.077428, 14.4394], [50.077439, 14.439327], [50.077704, 14.437821], [50.07769, 14.437813], [50.077626, 14.437776], [50.076849, 14.437332], [50.076842, 14.437328], [50.076777, 14.437289], [50.07671, 14.437672], [50.076689, 14.437784], [50.076493, 14.438891], [50.076463, 14.439065], [50.076544, 14.439093], [50.076662, 14.439134], [50.07733, 14.439366], [50.077413, 14.439395], [50.077428, 14.4394], [50.077439, 14.439327], [50.077704, 14.437821], [50.07769, 14.437813], [50.077626, 14.437776], [50.076849, 14.437332], [50.076842, 14.437328], [50.076777, 14.437289], [50.07671, 14.437672], [50.076689, 14.437784], [50.076493, 14.438891], [50.076463, 14.439065], [50.076544, 14.439093], [50.076617, 14.439119], [50.07733, 14.439366], [50.077413, 14.439395], [50.077428, 14.4394], [50.077439, 14.439327], [50.077704, 14.437821], [50.07769, 14.437813], [50.077626, 14.437776], [50.076849, 14.437332], [50.076842, 14.437328], [50.076777, 14.437289], [50.07671, 14.437672], [50.076689, 14.437784], [50.076493, 14.438891], [50.076482, 14.438957], [50.076463, 14.439065], [50.076529, 14.439088], [50.076544, 14.439093], [50.07733, 14.439366], [50.077413, 14.439395], [50.077428, 14.4394], [50.077439, 14.439327], [50.077704, 14.437821], [50.07769, 14.437813], [50.077626, 14.437776], [50.076849, 14.437332], [50.076842, 14.437328], [50.076777, 14.437289], [50.07671, 14.437672], [50.076689, 14.437784], [50.076515, 14.438766], [50.076493, 14.438891], [50.076463, 14.439065], [50.076363, 14.439029], [50.076088, 14.439031], [50.076028, 14.439032], [50.076006, 14.438881], [50.075943, 14.438379], [50.075914, 14.438175], [50.075872, 14.437882], [50.075868, 14.437854], [50.075863, 14.437821], [50.075847, 14.437669], [50.075851, 14.437516], [50.075881, 14.437441], [50.075936, 14.437382], [50.07596, 14.437356], [50.075991, 14.437368], [50.07671, 14.437672], [50.076689, 14.437784], [50.076532, 14.438671], [50.076493, 14.438891], [50.076463, 14.439065], [50.076363, 14.439029], [50.076088, 14.439031], [50.076028, 14.439032], [50.076006, 14.438881], [50.075943, 14.438379], [50.075914, 14.438175], [50.075872, 14.437882], [50.075868, 14.437854], [50.075863, 14.437821], [50.075847, 14.437669], [50.075851, 14.437516], [50.075881, 14.437441], [50.075936, 14.437382], [50.07596, 14.437356], [50.075991, 14.437368], [50.07671, 14.437672], [50.076689, 14.437784], [50.076549, 14.438577], [50.076493, 14.438891], [50.076463, 14.439065], [50.076363, 14.439029], [50.076088, 14.439031], [50.076028, 14.439032], [50.076006, 14.438881], [50.075943, 14.438379], [50.075914, 14.438175], [50.075872, 14.437882], [50.075868, 14.437854], [50.075863, 14.437821], [50.075847, 14.437669], [50.075851, 14.437516], [50.075881, 14.437441], [50.075936, 14.437382], [50.07596, 14.437356], [50.075991, 14.437368], [50.07671, 14.437672], [50.076689, 14.437784], [50.076565, 14.438483], [50.076565, 14.438483]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(map_696076272d492d27e6d3ac7241ab2e03);
        
    
            var poly_line_39cf547f8d692c86687d9fa1894b1757 = L.polyline(
                [[50.078536, 14.443617], [50.078532, 14.443634], [50.078529, 14.443642], [50.07851, 14.443683], [50.078433, 14.443726], [50.078423, 14.443727], [50.078373, 14.443733], [50.078315, 14.443739], [50.078315, 14.443739], [50.078183, 14.443754]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(map_696076272d492d27e6d3ac7241ab2e03);
        
    
            var poly_line_5606e7e473b3d7043f3484b3abeedc94 = L.polyline(
                [[50.076512, 14.443905], [50.076483, 14.443904]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(map_696076272d492d27e6d3ac7241ab2e03);
        
</script>" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen=""></iframe></div></div>
</div>
</div>
<p>Okay, thanks for that mapbox. Quite nice and abstract. Not really what I was looking for but hey, its something.</p>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb5" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Generic</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Fergus Fettes"</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="an">updated:</span><span class="co"> today</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="an">date-format:</span><span class="co"> "MMM D, YYYY"</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="an">title-block-banner:</span><span class="co"> pink</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="an">title-block-banner-color:</span><span class="co"> white</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># date-format: iso</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="an">jupyter:</span><span class="co"> python3</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="an">toc:</span><span class="co"> true       # Table of Contents</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="an">reference-location:</span><span class="co"> margin</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co">    citations-hover: true</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co">    footnotes-hover: true</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="an">freeze:</span><span class="co"> auto</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Specific</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> GIS Map Experiments</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> 2022-10-30T11:37:33+01:00</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="fu"># Introduction</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>Cartography is an ancient and noble art. It has continued apace into the modern era. It seems clear that it will be a useful tool in my kit, both regarding my career as well as my hobbies, and there are many fun everyday applications of it, so I am finally diving in to studying it in a little more detail.</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Main</span><span class="co">](/Projects/GIS.qmd)</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a><span class="fu"># Attempt 2 to make running routes from text</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a><span class="fu">## Convert Text to GPS Coords</span></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the text to a path</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> svgpathtools</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>paths <span class="op">=</span> svgpathtools.svg2paths(<span class="st">'/h/Pictures/test2.svg'</span>)[<span class="dv">0</span>]</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the path to a list of points</span></span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> path_to_points(path, n<span class="op">=</span><span class="dv">100</span>):</span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>    points <span class="op">=</span> []</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> path:</span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">isinstance</span>(line, svgpathtools.Line):</span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>            x <span class="op">=</span> np.linspace(line.start.real, line.end.real, <span class="dv">10</span>)</span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>            y <span class="op">=</span> np.linspace(line.start.imag, line.end.imag, <span class="dv">10</span>)</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>            points.extend(<span class="bu">list</span>(<span class="bu">zip</span>(x, y)))</span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> <span class="bu">isinstance</span>(line, svgpathtools.CubicBezier):</span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>            x <span class="op">=</span> np.linspace(line.start.real, line.end.real, <span class="dv">10</span>)</span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>            y <span class="op">=</span> np.linspace(line.start.imag, line.end.imag, <span class="dv">10</span>)</span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>            points.extend(<span class="bu">list</span>(<span class="bu">zip</span>(x, y)))</span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">'Unknown line type: </span><span class="sc">{}</span><span class="st">'</span>.<span class="bu">format</span>(line))</span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> points</span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>points <span class="op">=</span> []</span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> path <span class="kw">in</span> paths:</span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>    points.append(path_to_points(path))</span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a><span class="co"># Flip the y axis</span></span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a>points <span class="op">=</span> [[(x, <span class="op">-</span>y) <span class="cf">for</span> x, y <span class="kw">in</span> path] <span class="cf">for</span> path <span class="kw">in</span> points]</span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the points</span></span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">6</span>))</span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> path <span class="kw">in</span> points:</span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a>    x, y <span class="op">=</span> <span class="bu">zip</span>(<span class="op">*</span>path)</span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a>    plt.plot(x, y)</span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a>So, now I'm just going to draw a simple image in Inkscape, and then convert it to a list of points. I can later figure out how to generate my svg properly (the trick to converting an SVG with text to an set of lines is not jumping out at me).</span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb5-80"><a href="#cb5-80" aria-hidden="true" tabindex="-1"></a><span class="co"># Center the x and y coordinates on Prague, and stretch them to the correct size</span></span>
<span id="cb5-81"><a href="#cb5-81" aria-hidden="true" tabindex="-1"></a>prague <span class="op">=</span> (<span class="fl">14.4378</span>, <span class="fl">50.0755</span>)</span>
<span id="cb5-82"><a href="#cb5-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-83"><a href="#cb5-83" aria-hidden="true" tabindex="-1"></a><span class="co"># Width is 500m</span></span>
<span id="cb5-84"><a href="#cb5-84" aria-hidden="true" tabindex="-1"></a>target_width <span class="op">=</span> <span class="dv">2000</span></span>
<span id="cb5-85"><a href="#cb5-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-86"><a href="#cb5-86" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the ratio of the width and height of the points</span></span>
<span id="cb5-87"><a href="#cb5-87" aria-hidden="true" tabindex="-1"></a>width <span class="op">=</span> <span class="bu">max</span>(x <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> x, y <span class="kw">in</span> path) <span class="op">-</span> <span class="bu">min</span>(x <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> x, y <span class="kw">in</span> path)</span>
<span id="cb5-88"><a href="#cb5-88" aria-hidden="true" tabindex="-1"></a>height <span class="op">=</span> <span class="bu">max</span>(y <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> x, y <span class="kw">in</span> path) <span class="op">-</span> <span class="bu">min</span>(y <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> x, y <span class="kw">in</span> path)</span>
<span id="cb5-89"><a href="#cb5-89" aria-hidden="true" tabindex="-1"></a>ratio <span class="op">=</span> width <span class="op">/</span> height</span>
<span id="cb5-90"><a href="#cb5-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-91"><a href="#cb5-91" aria-hidden="true" tabindex="-1"></a><span class="co"># Meters to degrees</span></span>
<span id="cb5-92"><a href="#cb5-92" aria-hidden="true" tabindex="-1"></a>meters_to_degrees <span class="op">=</span> <span class="dv">1</span> <span class="op">/</span> <span class="dv">111111</span></span>
<span id="cb5-93"><a href="#cb5-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-94"><a href="#cb5-94" aria-hidden="true" tabindex="-1"></a><span class="co"># Degree range</span></span>
<span id="cb5-95"><a href="#cb5-95" aria-hidden="true" tabindex="-1"></a>degree_width <span class="op">=</span> target_width <span class="op">*</span> meters_to_degrees</span>
<span id="cb5-96"><a href="#cb5-96" aria-hidden="true" tabindex="-1"></a><span class="co"># Height is proportional to the width</span></span>
<span id="cb5-97"><a href="#cb5-97" aria-hidden="true" tabindex="-1"></a>degree_height <span class="op">=</span> degree_width <span class="op">/</span> ratio</span>
<span id="cb5-98"><a href="#cb5-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-99"><a href="#cb5-99" aria-hidden="true" tabindex="-1"></a><span class="co"># Center the points</span></span>
<span id="cb5-100"><a href="#cb5-100" aria-hidden="true" tabindex="-1"></a>center_x <span class="op">=</span> (<span class="bu">max</span>(x <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> x, y <span class="kw">in</span> path) <span class="op">+</span> <span class="bu">min</span>(x <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> x, y <span class="kw">in</span> path)) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb5-101"><a href="#cb5-101" aria-hidden="true" tabindex="-1"></a>center_y <span class="op">=</span> (<span class="bu">max</span>(y <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> x, y <span class="kw">in</span> path) <span class="op">+</span> <span class="bu">min</span>(y <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> x, y <span class="kw">in</span> path)) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb5-102"><a href="#cb5-102" aria-hidden="true" tabindex="-1"></a>points <span class="op">=</span> [[(x <span class="op">-</span> center_x, y <span class="op">-</span> center_y) <span class="cf">for</span> x, y <span class="kw">in</span> path] <span class="cf">for</span> path <span class="kw">in</span> points]</span>
<span id="cb5-103"><a href="#cb5-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-104"><a href="#cb5-104" aria-hidden="true" tabindex="-1"></a><span class="co"># Scale the points</span></span>
<span id="cb5-105"><a href="#cb5-105" aria-hidden="true" tabindex="-1"></a>points <span class="op">=</span> [[(x <span class="op">*</span> degree_width <span class="op">/</span> width, y <span class="op">*</span> degree_height <span class="op">/</span> height) <span class="cf">for</span> x, y <span class="kw">in</span> path] <span class="cf">for</span> path <span class="kw">in</span> points]</span>
<span id="cb5-106"><a href="#cb5-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-107"><a href="#cb5-107" aria-hidden="true" tabindex="-1"></a><span class="co"># Move the points to Prague</span></span>
<span id="cb5-108"><a href="#cb5-108" aria-hidden="true" tabindex="-1"></a>points <span class="op">=</span> [[(x <span class="op">+</span> prague[<span class="dv">0</span>], y <span class="op">+</span> prague[<span class="dv">1</span>]) <span class="cf">for</span> x, y <span class="kw">in</span> path] <span class="cf">for</span> path <span class="kw">in</span> points]</span>
<span id="cb5-109"><a href="#cb5-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-110"><a href="#cb5-110" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the points to a list of geometry objects</span></span>
<span id="cb5-111"><a href="#cb5-111" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shapely.geometry</span>
<span id="cb5-112"><a href="#cb5-112" aria-hidden="true" tabindex="-1"></a>points <span class="op">=</span> [[shapely.geometry.Point(x, y) <span class="cf">for</span> x, y <span class="kw">in</span> path] <span class="cf">for</span> path <span class="kw">in</span> points]</span>
<span id="cb5-113"><a href="#cb5-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-114"><a href="#cb5-114" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list of path objects</span></span>
<span id="cb5-115"><a href="#cb5-115" aria-hidden="true" tabindex="-1"></a>geom_paths <span class="op">=</span> [shapely.geometry.LineString(path) <span class="cf">for</span> path <span class="kw">in</span> points]</span>
<span id="cb5-116"><a href="#cb5-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-117"><a href="#cb5-117" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the GeoJSON</span></span>
<span id="cb5-118"><a href="#cb5-118" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> folium</span>
<span id="cb5-119"><a href="#cb5-119" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> folium.Map(location<span class="op">=</span>[prague[<span class="dv">1</span>], prague[<span class="dv">0</span>]], zoom_start<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb5-120"><a href="#cb5-120" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> path <span class="kw">in</span> points:</span>
<span id="cb5-121"><a href="#cb5-121" aria-hidden="true" tabindex="-1"></a>    folium.PolyLine([(p.y, p.x) <span class="cf">for</span> p <span class="kw">in</span> path]).add_to(m)</span>
<span id="cb5-122"><a href="#cb5-122" aria-hidden="true" tabindex="-1"></a>m</span>
<span id="cb5-123"><a href="#cb5-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-124"><a href="#cb5-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-125"><a href="#cb5-125" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb5-126"><a href="#cb5-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-127"><a href="#cb5-127" aria-hidden="true" tabindex="-1"></a>Okay that worked and is looking a lot more like what I want. Now I just need to figure out how to snap the vectors to roads.</span>
<span id="cb5-128"><a href="#cb5-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-129"><a href="#cb5-129" aria-hidden="true" tabindex="-1"></a><span class="fu">## Snap to Roads</span></span>
<span id="cb5-130"><a href="#cb5-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-133"><a href="#cb5-133" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb5-134"><a href="#cb5-134" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the bounding box of the points</span></span>
<span id="cb5-135"><a href="#cb5-135" aria-hidden="true" tabindex="-1"></a>min_x <span class="op">=</span> <span class="bu">min</span>(p.x <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> p <span class="kw">in</span> path)</span>
<span id="cb5-136"><a href="#cb5-136" aria-hidden="true" tabindex="-1"></a>max_x <span class="op">=</span> <span class="bu">max</span>(p.x <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> p <span class="kw">in</span> path)</span>
<span id="cb5-137"><a href="#cb5-137" aria-hidden="true" tabindex="-1"></a>min_y <span class="op">=</span> <span class="bu">min</span>(p.y <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> p <span class="kw">in</span> path)</span>
<span id="cb5-138"><a href="#cb5-138" aria-hidden="true" tabindex="-1"></a>max_y <span class="op">=</span> <span class="bu">max</span>(p.y <span class="cf">for</span> path <span class="kw">in</span> points <span class="cf">for</span> p <span class="kw">in</span> path)</span>
<span id="cb5-139"><a href="#cb5-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-140"><a href="#cb5-140" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the highways, streets, and footways</span></span>
<span id="cb5-141"><a href="#cb5-141" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> overpy</span>
<span id="cb5-142"><a href="#cb5-142" aria-hidden="true" tabindex="-1"></a>api <span class="op">=</span> overpy.Overpass()</span>
<span id="cb5-143"><a href="#cb5-143" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> api.query(<span class="ss">f"""</span></span>
<span id="cb5-144"><a href="#cb5-144" aria-hidden="true" tabindex="-1"></a><span class="ss">(</span></span>
<span id="cb5-145"><a href="#cb5-145" aria-hidden="true" tabindex="-1"></a><span class="ss">  way["highway"="residential"](</span><span class="sc">{</span>min_y<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>min_x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>max_y<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>max_x<span class="sc">}</span><span class="ss">);</span></span>
<span id="cb5-146"><a href="#cb5-146" aria-hidden="true" tabindex="-1"></a><span class="ss">  way["highway"="primary"](</span><span class="sc">{</span>min_y<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>min_x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>max_y<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>max_x<span class="sc">}</span><span class="ss">);</span></span>
<span id="cb5-147"><a href="#cb5-147" aria-hidden="true" tabindex="-1"></a><span class="ss">  way["highway"="tertiary"](</span><span class="sc">{</span>min_y<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>min_x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>max_y<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>max_x<span class="sc">}</span><span class="ss">);</span></span>
<span id="cb5-148"><a href="#cb5-148" aria-hidden="true" tabindex="-1"></a><span class="ss">    way["highway"="footway"](</span><span class="sc">{</span>min_y<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>min_x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>max_y<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>max_x<span class="sc">}</span><span class="ss">);</span></span>
<span id="cb5-149"><a href="#cb5-149" aria-hidden="true" tabindex="-1"></a><span class="ss">);</span></span>
<span id="cb5-150"><a href="#cb5-150" aria-hidden="true" tabindex="-1"></a><span class="ss">(._;&gt;;);</span></span>
<span id="cb5-151"><a href="#cb5-151" aria-hidden="true" tabindex="-1"></a><span class="ss">out geom;</span></span>
<span id="cb5-152"><a href="#cb5-152" aria-hidden="true" tabindex="-1"></a><span class="ss">"""</span>)</span>
<span id="cb5-153"><a href="#cb5-153" aria-hidden="true" tabindex="-1"></a>roads <span class="op">=</span> [shapely.geometry.LineString([(n.lon, n.lat) <span class="cf">for</span> n <span class="kw">in</span> w.nodes]) <span class="cf">for</span> w <span class="kw">in</span> result.ways]</span>
<span id="cb5-154"><a href="#cb5-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-155"><a href="#cb5-155" aria-hidden="true" tabindex="-1"></a>road_points <span class="op">=</span> []</span>
<span id="cb5-156"><a href="#cb5-156" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> path <span class="kw">in</span> points:</span>
<span id="cb5-157"><a href="#cb5-157" aria-hidden="true" tabindex="-1"></a>    road_points.append([])</span>
<span id="cb5-158"><a href="#cb5-158" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> point <span class="kw">in</span> path:</span>
<span id="cb5-159"><a href="#cb5-159" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Find the closest road</span></span>
<span id="cb5-160"><a href="#cb5-160" aria-hidden="true" tabindex="-1"></a>        closest_road <span class="op">=</span> <span class="bu">min</span>(roads, key<span class="op">=</span><span class="kw">lambda</span> r: r.distance(point))</span>
<span id="cb5-161"><a href="#cb5-161" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Find the closest point on the road</span></span>
<span id="cb5-162"><a href="#cb5-162" aria-hidden="true" tabindex="-1"></a>        closest_point <span class="op">=</span> closest_road.interpolate(closest_road.project(point))</span>
<span id="cb5-163"><a href="#cb5-163" aria-hidden="true" tabindex="-1"></a>        road_points[<span class="op">-</span><span class="dv">1</span>].append(closest_point)</span>
<span id="cb5-164"><a href="#cb5-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-165"><a href="#cb5-165" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the road_points</span></span>
<span id="cb5-166"><a href="#cb5-166" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> folium</span>
<span id="cb5-167"><a href="#cb5-167" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> folium.Map(location<span class="op">=</span>[prague[<span class="dv">1</span>], prague[<span class="dv">0</span>]], zoom_start<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb5-168"><a href="#cb5-168" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> path <span class="kw">in</span> road_points:</span>
<span id="cb5-169"><a href="#cb5-169" aria-hidden="true" tabindex="-1"></a>    folium.PolyLine([(p.y, p.x) <span class="cf">for</span> p <span class="kw">in</span> path]).add_to(m)</span>
<span id="cb5-170"><a href="#cb5-170" aria-hidden="true" tabindex="-1"></a>m</span>
<span id="cb5-171"><a href="#cb5-171" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb5-172"><a href="#cb5-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-173"><a href="#cb5-173" aria-hidden="true" tabindex="-1"></a>Okay! That.. actually did work. In the sense that it did what I asked for. However I'm realising once again that perhaps what I asked for is not exactly what I wanted. Snapping the text to the nearest road is nice, doing so without asking me to run through buildings would be nicer.</span>
<span id="cb5-174"><a href="#cb5-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-175"><a href="#cb5-175" aria-hidden="true" tabindex="-1"></a>Lets have one more attempt.</span>
<span id="cb5-176"><a href="#cb5-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-177"><a href="#cb5-177" aria-hidden="true" tabindex="-1"></a><span class="fu">## Snap to Roads (Attempt 2)</span></span>
<span id="cb5-178"><a href="#cb5-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-181"><a href="#cb5-181" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb5-182"><a href="#cb5-182" aria-hidden="true" tabindex="-1"></a><span class="co"># Use mapbox to snap the points to the roads</span></span>
<span id="cb5-183"><a href="#cb5-183" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> mapbox</span>
<span id="cb5-184"><a href="#cb5-184" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb5-185"><a href="#cb5-185" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> dotenv</span>
<span id="cb5-186"><a href="#cb5-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-187"><a href="#cb5-187" aria-hidden="true" tabindex="-1"></a>dotenv.load_dotenv()</span>
<span id="cb5-188"><a href="#cb5-188" aria-hidden="true" tabindex="-1"></a>mapbox_token <span class="op">=</span> os.environ[<span class="st">'MAPBOX_TOKEN'</span>]</span>
<span id="cb5-189"><a href="#cb5-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-190"><a href="#cb5-190" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the map matching API to snap the points to the roads</span></span>
<span id="cb5-191"><a href="#cb5-191" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mapbox <span class="im">import</span> MapMatcher</span>
<span id="cb5-192"><a href="#cb5-192" aria-hidden="true" tabindex="-1"></a>mm <span class="op">=</span> MapMatcher(access_token<span class="op">=</span>mapbox_token)</span>
<span id="cb5-193"><a href="#cb5-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-194"><a href="#cb5-194" aria-hidden="true" tabindex="-1"></a><span class="co"># Create mapbox linestrings from shapely linestrings</span></span>
<span id="cb5-195"><a href="#cb5-195" aria-hidden="true" tabindex="-1"></a>mapbox_linestrings <span class="op">=</span> []</span>
<span id="cb5-196"><a href="#cb5-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-197"><a href="#cb5-197" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> create_linestring(path):</span>
<span id="cb5-198"><a href="#cb5-198" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb5-199"><a href="#cb5-199" aria-hidden="true" tabindex="-1"></a>        <span class="st">'type'</span>: <span class="st">'Feature'</span>,</span>
<span id="cb5-200"><a href="#cb5-200" aria-hidden="true" tabindex="-1"></a>        <span class="st">'properties'</span>: {},</span>
<span id="cb5-201"><a href="#cb5-201" aria-hidden="true" tabindex="-1"></a>        <span class="st">'geometry'</span>: {</span>
<span id="cb5-202"><a href="#cb5-202" aria-hidden="true" tabindex="-1"></a>            <span class="st">'type'</span>: <span class="st">'LineString'</span>,</span>
<span id="cb5-203"><a href="#cb5-203" aria-hidden="true" tabindex="-1"></a>            <span class="st">'coordinates'</span>: [(p.x, p.y) <span class="cf">for</span> p <span class="kw">in</span> path]</span>
<span id="cb5-204"><a href="#cb5-204" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb5-205"><a href="#cb5-205" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-206"><a href="#cb5-206" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> path <span class="kw">in</span> points:</span>
<span id="cb5-207"><a href="#cb5-207" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(path) <span class="op">&gt;</span> <span class="dv">100</span>:</span>
<span id="cb5-208"><a href="#cb5-208" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(path), <span class="dv">100</span>):</span>
<span id="cb5-209"><a href="#cb5-209" aria-hidden="true" tabindex="-1"></a>            mapbox_linestrings.append(create_linestring(path[i:i<span class="op">+</span><span class="dv">100</span>]))</span>
<span id="cb5-210"><a href="#cb5-210" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb5-211"><a href="#cb5-211" aria-hidden="true" tabindex="-1"></a>        mapbox_linestrings.append(create_linestring(path))</span>
<span id="cb5-212"><a href="#cb5-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-213"><a href="#cb5-213" aria-hidden="true" tabindex="-1"></a>responses <span class="op">=</span> [mm.match(feature<span class="op">=</span>linestring) <span class="cf">for</span> linestring <span class="kw">in</span> mapbox_linestrings]</span>
<span id="cb5-214"><a href="#cb5-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-215"><a href="#cb5-215" aria-hidden="true" tabindex="-1"></a>geometries <span class="op">=</span> [response.geojson()[<span class="st">'features'</span>][<span class="dv">0</span>][<span class="st">'geometry'</span>] <span class="cf">for</span> response <span class="kw">in</span> responses]</span>
<span id="cb5-216"><a href="#cb5-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-217"><a href="#cb5-217" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the points</span></span>
<span id="cb5-218"><a href="#cb5-218" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> folium</span>
<span id="cb5-219"><a href="#cb5-219" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> folium.Map(location<span class="op">=</span>[prague[<span class="dv">1</span>], prague[<span class="dv">0</span>]], zoom_start<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb5-220"><a href="#cb5-220" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> path <span class="kw">in</span> geometries:</span>
<span id="cb5-221"><a href="#cb5-221" aria-hidden="true" tabindex="-1"></a>    folium.PolyLine([(p[<span class="dv">1</span>], p[<span class="dv">0</span>]) <span class="cf">for</span> p <span class="kw">in</span> path[<span class="st">'coordinates'</span>]]).add_to(m)</span>
<span id="cb5-222"><a href="#cb5-222" aria-hidden="true" tabindex="-1"></a>m</span>
<span id="cb5-223"><a href="#cb5-223" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb5-224"><a href="#cb5-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-225"><a href="#cb5-225" aria-hidden="true" tabindex="-1"></a>Okay, thanks for that mapbox. Quite nice and abstract. Not really what I was looking for but hey, its something.</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">This blog is built with â¤ï¸ and <a href="https://www.quarto.org">Quarto</a> by Fergus Fettes. I didnâ€™t have to link that, this isnâ€™t WordPress.</div>   
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/FergusFettes">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>